app = "recibo-taxi"        # <-- se o nome do app no Fly for outro, troque aqui
primary_region = "gru"

[build]
  dockerfile = "Dockerfile"

# (opcional) algumas libs usam PORT; seu gunicorn já fixa 8080, mas não atrapalha:
[env]
  PORT = "8080"

[http_service]
  internal_port = 8080
  force_https = true
  auto_stop_machines = true
  auto_start_machines = true
  min_machines_running = 0
  processes = ["app"]
  # limite simples de concorrência por requisições
  concurrency = { type = "requests", soft_limit = 20, hard_limit = 25 }

# (opcional) healthcheck - habilite se você criou a rota /health no app.py
# [checks]
#   [checks.health]
#     port = 8080
#     type = "http"
#     interval = "15s"
#     timeout = "2s"
#     grace_period = "30s"
#     method = "GET"
#     path = "/health"
